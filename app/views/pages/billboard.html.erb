<% gradient_str = "-webkit-linear-gradient(top, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) 65%, rgba(0, 0, 0, 0.9) 90%, rgba(0, 0, 0, 1) 100%)"  %>
<%= render 'layouts/banner', banner_type: 'high-banner', img_url: image_path("old-reel.jpg"), gradient: gradient_str %>
<div class="container" style="color: white;">
  <div class="movie-title-wrapper">
    <h1>Select Your Film</h1>
  </div>

  <br>
  <div class="row">
    <div class="col-sm-8 col-sm-offset-2">
      <div class="row">
        <%= form_tag billboard_path, method: :get do %>
        <div class="col-xs-9">
          <div class="form-group">
            <%= text_field_tag :search, params[:search], class: "form-control", placeholder: "Title, director, theater, location..." %>
          </div>
        </div>
        <div class="col-xs-3">
          <%= submit_tag 'Search', name: nil, class: "btn btn-search btn-block" %>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="display">
    <!-- <div class="row"> -->
      <% unless @movies.nil? || @movies.empty? %>
        <div><h2>Your Results</h2></div>
        <%= render 'film_grid', movies: @movies %>
      <% else %>
        <% unless @local_movies.nil? || @local_movies .empty? %>
          <h2 class="on-dark">Near you</h2>
          <br>
          <%= render 'film_grid', movies: @local_movies[0..2]  %>
        <% end %>
        <% unless @fav_movies.nil? || @fav_movies .empty? %>
          <h2 class="on-dark">Favorite films</h2>
          <br>
          <%= render 'film_grid', movies: @fav_movies[0..2]  %>
        <% end %>
        <% unless @fav_dir_movies.nil? || @fav_dir_movies .empty? %>
          <h2 class="on-dark">From favorite directors</h2>
          <br>
          <%= render 'film_grid', movies: @fav_dir_movies[0..2]  %>
        <% end %>
      <% end %>

      <% if (!@local_movies.nil? && @local_movies.empty?) || ((!@movies.nil? && @movies.empty?)) && params[:search] %>
        <h2>No results matching your query</h2>
      <% else %>
        <br>
      <% end %>
      <!-- </div> -->
    </div>
</div>

